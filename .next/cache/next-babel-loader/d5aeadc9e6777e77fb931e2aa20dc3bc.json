{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\n\nfunction useLocalState(key, defaultValue) {\n  _s();\n\n  var _useState = useState(function () {\n    if (true) {\n      var storedValue = JSON.parse(localStorage.getItem(key));\n\n      if (!storedValue) {\n        return defaultValue;\n      }\n\n      return storedValue === null ? defaultValue : storedValue;\n    } else {\n      return defaultValue;\n    }\n  }),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  useEffect(function () {\n    var listener = function listener(e) {\n      if (e.storageArea === localStorage && e.key === key) {\n        setValue(JSON.parse(e.newValue));\n      }\n    };\n\n    window.addEventListener(\"storage\", listener);\n    return function () {\n      window.removeEventListener(\"storage\", listener);\n    };\n  }, [key]);\n\n  var setValueInLocalStorage = function setValueInLocalStorage(newValue) {\n    setValue(function (currentValue) {\n      var result = typeof newValue === \"function\" ? newValue(currentValue) : newValue;\n      localStorage.setItem(key, JSON.stringify(result));\n      return result;\n    });\n  };\n\n  useEffect(function () {\n    var storedValue = JSON.parse(localStorage.getItem(key));\n\n    if (storedValue) {\n      setValueInLocalStorage(storedValue);\n    } else {\n      setValueInLocalStorage(value);\n    }\n  }, []);\n  return [value, setValueInLocalStorage];\n}\n\n_s(useLocalState, \"vWD4KIFqq+xBJJ4+U730nxHPY1o=\");\n\n;\nexport default useLocalState;","map":{"version":3,"sources":["/home/ishraqkabir/workspace/smartifier-frontend/custom-hooks/useLocalState.ts"],"names":["useState","useEffect","useLocalState","key","defaultValue","storedValue","JSON","parse","localStorage","getItem","value","setValue","listener","e","storageArea","newValue","window","addEventListener","removeEventListener","setValueInLocalStorage","currentValue","result","setItem","stringify"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;;AAEA,SAASC,aAAT,CAAuBC,GAAvB,EAAoCC,YAApC,EAAqD;AAAA;;AAAA,kBACvBJ,QAAQ,CAAC,YAAM;AACrC,cAAqB;AACjB,UAAMK,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBN,GAArB,CAAX,CAApB;;AACA,UAAI,CAACE,WAAL,EAAkB;AACd,eAAOD,YAAP;AACH;;AACD,aAAOC,WAAW,KAAK,IAAhB,GAAuBD,YAAvB,GAAsCC,WAA7C;AACH,KAND,MAMO;AACH,aAAOD,YAAP;AACH;AACJ,GAViC,CADe;AAAA,MAC1CM,KAD0C;AAAA,MACnCC,QADmC;;AAajDV,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAMW,QAAQ,GAAG,SAAXA,QAAW,CAACC,CAAD,EAAO;AACpB,UAAIA,CAAC,CAACC,WAAF,KAAkBN,YAAlB,IAAkCK,CAAC,CAACV,GAAF,KAAUA,GAAhD,EAAqD;AACjDQ,QAAAA,QAAQ,CAACL,IAAI,CAACC,KAAL,CAAWM,CAAC,CAACE,QAAb,CAAD,CAAR;AACH;AACJ,KAJD;;AAKAC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCL,QAAnC;AAEA,WAAO,YAAM;AACTI,MAAAA,MAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCN,QAAtC;AACH,KAFD;AAGH,GAXQ,EAWN,CAACT,GAAD,CAXM,CAAT;;AAaA,MAAMgB,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACJ,QAAD,EAAc;AACzCJ,IAAAA,QAAQ,CAAC,UAACS,YAAD,EAAkB;AACvB,UAAMC,MAAM,GACR,OAAON,QAAP,KAAoB,UAApB,GAAiCA,QAAQ,CAACK,YAAD,CAAzC,GAA0DL,QAD9D;AAEAP,MAAAA,YAAY,CAACc,OAAb,CAAqBnB,GAArB,EAA0BG,IAAI,CAACiB,SAAL,CAAeF,MAAf,CAA1B;AACA,aAAOA,MAAP;AACH,KALO,CAAR;AAMH,GAPD;;AASApB,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAMI,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBN,GAArB,CAAX,CAApB;;AACA,QAAIE,WAAJ,EAAiB;AACbc,MAAAA,sBAAsB,CAACd,WAAD,CAAtB;AACH,KAFD,MAEO;AACHc,MAAAA,sBAAsB,CAACT,KAAD,CAAtB;AACH;AACJ,GAPQ,EAON,EAPM,CAAT;AASA,SAAO,CAACA,KAAD,EAAQS,sBAAR,CAAP;AACH;;GA7CQjB,a;;AA6CR;AAED,eAAeA,aAAf","sourcesContent":["import { useState, useEffect } from \"react\";\n\nfunction useLocalState(key: string, defaultValue: T) {\n    const [value, setValue] = useState(() => {\n        if (process.browser) {\n            const storedValue = JSON.parse(localStorage.getItem(key));\n            if (!storedValue) {\n                return defaultValue;\n            }\n            return storedValue === null ? defaultValue : storedValue;\n        } else {\n            return defaultValue;\n        }\n    });\n\n    useEffect(() => {\n        const listener = (e) => {\n            if (e.storageArea === localStorage && e.key === key) {\n                setValue(JSON.parse(e.newValue));\n            }\n        };\n        window.addEventListener(\"storage\", listener);\n\n        return () => {\n            window.removeEventListener(\"storage\", listener);\n        };\n    }, [key]);\n\n    const setValueInLocalStorage = (newValue) => {\n        setValue((currentValue) => {\n            const result =\n                typeof newValue === \"function\" ? newValue(currentValue) : newValue;\n            localStorage.setItem(key, JSON.stringify(result));\n            return result;\n        });\n    };\n\n    useEffect(() => {\n        const storedValue = JSON.parse(localStorage.getItem(key));\n        if (storedValue) {\n            setValueInLocalStorage(storedValue);\n        } else {\n            setValueInLocalStorage(value);\n        }\n    }, []);\n\n    return [value, setValueInLocalStorage];\n};\n\nexport default useLocalState;\n"]},"metadata":{},"sourceType":"module"}