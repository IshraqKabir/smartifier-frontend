{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport Cookies from \"js-cookie\";\n\nfunction useLocalState(key, defaultValue) {\n  _s();\n\n  var _useState = useState(function () {\n    if (true) {\n      var storedValue = JSON.parse(localStorage.getItem(key));\n\n      if (!storedValue) {\n        return defaultValue;\n      }\n\n      return storedValue === null ? defaultValue : storedValue;\n    } else {\n      return defaultValue;\n    }\n  }),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  useEffect(function () {\n    console.log(Cookies.get(JSON.stringify(key)));\n  }, []);\n  useEffect(function () {\n    var listener = function listener(e) {\n      if (e.storageArea === localStorage && e.key === key) {\n        setValue(JSON.parse(e.newValue));\n      }\n    };\n\n    window.addEventListener(\"storage\", listener);\n    return function () {\n      window.removeEventListener(\"storage\", listener);\n    };\n  }, [key]);\n\n  var setValueInLocalStorage = function setValueInLocalStorage(newValue) {\n    if (typeof newValue === \"function\") {\n      setCookie(value);\n    } else {\n      setCookie(newValue);\n    }\n\n    setValue(function (currentValue) {\n      var result = typeof newValue === \"function\" ? newValue(currentValue) : newValue;\n      localStorage.setItem(key, JSON.stringify(result));\n      return result;\n    });\n  };\n\n  var setCookie = function setCookie(value) {\n    Cookies.set(JSON.stringify(key), JSON.stringify(value));\n  };\n\n  useEffect(function () {\n    var storedValue = JSON.parse(localStorage.getItem(key));\n\n    if (storedValue) {\n      setValueInLocalStorage(storedValue);\n    } else {\n      setValueInLocalStorage(value);\n    }\n  }, []);\n  return [value, setValueInLocalStorage];\n}\n\n_s(useLocalState, \"b9wJHvlBLtFEXKDBuYaybO7kWBY=\");\n\nexport default useLocalState;","map":{"version":3,"sources":["/home/ishraqkabir/workspace/smartifier-frontend/custom-hooks/useLocalState.ts"],"names":["useState","useEffect","Cookies","useLocalState","key","defaultValue","storedValue","JSON","parse","localStorage","getItem","value","setValue","console","log","get","stringify","listener","e","storageArea","newValue","window","addEventListener","removeEventListener","setValueInLocalStorage","setCookie","currentValue","result","setItem","set"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,OAAP,MAAoB,WAApB;;AAEA,SAASC,aAAT,CAA0BC,GAA1B,EAAuCC,YAAvC,EAAwD;AAAA;;AAAA,kBAC5BL,QAAQ,CAAC,YAAM;AACvC,cAAqB;AACnB,UAAMM,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBN,GAArB,CAAX,CAApB;;AACA,UAAI,CAACE,WAAL,EAAkB;AAChB,eAAOD,YAAP;AACD;;AACD,aAAOC,WAAW,KAAK,IAAhB,GAAuBD,YAAvB,GAAsCC,WAA7C;AACD,KAND,MAMO;AACL,aAAOD,YAAP;AACD;AACF,GAViC,CADoB;AAAA,MAC/CM,KAD+C;AAAA,MACxCC,QADwC;;AAatDX,EAAAA,SAAS,CAAC,YAAM;AACdY,IAAAA,OAAO,CAACC,GAAR,CAAYZ,OAAO,CAACa,GAAR,CAAYR,IAAI,CAACS,SAAL,CAAeZ,GAAf,CAAZ,CAAZ;AACD,GAFQ,EAEN,EAFM,CAAT;AAIAH,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMgB,QAAQ,GAAG,SAAXA,QAAW,CAACC,CAAD,EAAO;AACtB,UAAIA,CAAC,CAACC,WAAF,KAAkBV,YAAlB,IAAkCS,CAAC,CAACd,GAAF,KAAUA,GAAhD,EAAqD;AACnDQ,QAAAA,QAAQ,CAACL,IAAI,CAACC,KAAL,CAAWU,CAAC,CAACE,QAAb,CAAD,CAAR;AACD;AACF,KAJD;;AAKAC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCL,QAAnC;AAEA,WAAO,YAAM;AACXI,MAAAA,MAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCN,QAAtC;AACD,KAFD;AAGD,GAXQ,EAWN,CAACb,GAAD,CAXM,CAAT;;AAaA,MAAMoB,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACJ,QAAD,EAAc;AAC3C,QAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClCK,MAAAA,SAAS,CAACd,KAAD,CAAT;AACD,KAFD,MAEO;AACLc,MAAAA,SAAS,CAACL,QAAD,CAAT;AACD;;AAEDR,IAAAA,QAAQ,CAAC,UAACc,YAAD,EAAkB;AACzB,UAAMC,MAAM,GACV,OAAOP,QAAP,KAAoB,UAApB,GAAiCA,QAAQ,CAACM,YAAD,CAAzC,GAA0DN,QAD5D;AAEAX,MAAAA,YAAY,CAACmB,OAAb,CAAqBxB,GAArB,EAA0BG,IAAI,CAACS,SAAL,CAAeW,MAAf,CAA1B;AACA,aAAOA,MAAP;AACD,KALO,CAAR;AAMD,GAbD;;AAeA,MAAMF,SAAS,GAAG,SAAZA,SAAY,CAACd,KAAD,EAAW;AAC3BT,IAAAA,OAAO,CAAC2B,GAAR,CAAYtB,IAAI,CAACS,SAAL,CAAeZ,GAAf,CAAZ,EAAiCG,IAAI,CAACS,SAAL,CAAeL,KAAf,CAAjC;AACD,GAFD;;AAIAV,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMK,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBN,GAArB,CAAX,CAApB;;AACA,QAAIE,WAAJ,EAAiB;AACfkB,MAAAA,sBAAsB,CAAClB,WAAD,CAAtB;AACD,KAFD,MAEO;AACLkB,MAAAA,sBAAsB,CAACb,KAAD,CAAtB;AACD;AACF,GAPQ,EAON,EAPM,CAAT;AASA,SAAO,CAACA,KAAD,EAAQa,sBAAR,CAAP;AACD;;GA3DQrB,a;;AA6DT,eAAeA,aAAf","sourcesContent":["import { useState, useEffect } from \"react\";\nimport Cookies from \"js-cookie\";\n\nfunction useLocalState<T>(key: string, defaultValue: T) {\n  const [value, setValue] = useState(() => {\n    if (process.browser) {\n      const storedValue = JSON.parse(localStorage.getItem(key));\n      if (!storedValue) {\n        return defaultValue;\n      }\n      return storedValue === null ? defaultValue : storedValue;\n    } else {\n      return defaultValue;\n    }\n  });\n\n  useEffect(() => {\n    console.log(Cookies.get(JSON.stringify(key)));\n  }, []);\n\n  useEffect(() => {\n    const listener = (e) => {\n      if (e.storageArea === localStorage && e.key === key) {\n        setValue(JSON.parse(e.newValue));\n      }\n    };\n    window.addEventListener(\"storage\", listener);\n\n    return () => {\n      window.removeEventListener(\"storage\", listener);\n    };\n  }, [key]);\n\n  const setValueInLocalStorage = (newValue) => {\n    if (typeof newValue === \"function\") {\n      setCookie(value);\n    } else {\n      setCookie(newValue);\n    }\n\n    setValue((currentValue) => {\n      const result =\n        typeof newValue === \"function\" ? newValue(currentValue) : newValue;\n      localStorage.setItem(key, JSON.stringify(result));\n      return result;\n    });\n  };\n\n  const setCookie = (value) => {\n    Cookies.set(JSON.stringify(key), JSON.stringify(value));\n  };\n\n  useEffect(() => {\n    const storedValue = JSON.parse(localStorage.getItem(key));\n    if (storedValue) {\n      setValueInLocalStorage(storedValue);\n    } else {\n      setValueInLocalStorage(value);\n    }\n  }, []);\n\n  return [value, setValueInLocalStorage];\n}\n\nexport default useLocalState;\n"]},"metadata":{},"sourceType":"module"}