{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { createContext } from \"react\";\nimport useStartTest from \"./useStartTest\";\nimport { Box, CircularProgress, withStyles } from \"@material-ui/core\";\nimport PageTitle from \"../PageTitle/PageTitle\";\nimport Topbar from \"../Layout/Topbar/Topbar\";\nimport Timer from \"./Timer/Timer\";\nimport Questions from \"../Questions/Questions\";\nimport useLocalState from \"../../custom-hooks/useLocalState\";\nimport Submit from \"./Submit/Submit\";\nexport var QuizIDContext = /*#__PURE__*/createContext(null);\nexport var AnswersContext = /*#__PURE__*/createContext(null);\n\nvar QuizTest = function QuizTest(_ref) {\n  var _test$quiz;\n\n  var id = _ref.id;\n\n  var _useStartTest = useStartTest(id),\n      test = _useStartTest.test,\n      isLoading = _useStartTest.isLoading,\n      isError = _useStartTest.isError;\n\n  var _useLocalState = useLocalState(\"user\", \"\"),\n      _useLocalState2 = _slicedToArray(_useLocalState, 1),\n      user = _useLocalState2[0];\n\n  var _useLocalState3 = useLocalState(\"\".concat(user.email, \"-quiz\").concat(id, \"-answers\"), {}),\n      _useLocalState4 = _slicedToArray(_useLocalState3, 2),\n      answers = _useLocalState4[0],\n      setAnswersState = _useLocalState4[1];\n\n  console.log(answers);\n  if (isError) return /*#__PURE__*/_jsx(\"p\", {\n    children: \"Sorry some error occured. Please refresh the page.\"\n  });\n\n  var setAnswers = function setAnswers(optionID, question) {\n    setAnswersState(function (state) {\n      var tempAnswers = _objectSpread({}, state);\n\n      if (question.answer_type === \"multiple_choice\") {\n        var options = tempAnswers[\"\".concat(question.id)];\n\n        if (options && options.includes(optionID)) {\n          tempAnswers = _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, \"\".concat(question.id), []));\n        } else {\n          tempAnswers = _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, \"\".concat(question.id), [optionID]));\n        }\n      } else if (question.answer_type === \"checkboxes\") {\n        var _options = tempAnswers[\"\".concat(question.id)];\n\n        if (_options && _options.includes(optionID)) {\n          tempAnswers = _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, \"\".concat(question.id), _options.filter(function (option) {\n            return option != optionID;\n          })));\n        } else if (_options && !_options.includes(optionID)) {\n          tempAnswers = _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, \"\".concat(question.id), [].concat(_toConsumableArray(_options), [optionID])));\n        } else {\n          tempAnswers = _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, \"\".concat(question.id), [optionID]));\n        }\n      }\n\n      return _objectSpread({}, tempAnswers);\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(Topbar, {}), /*#__PURE__*/_jsxs(Container, {\n      children: [/*#__PURE__*/_jsx(PageTitle, {\n        title: isLoading ? \"Starting Test...\" : test.quiz.title,\n        children: isLoading && /*#__PURE__*/_jsx(CircularProgress, {})\n      }), test && !isLoading && /*#__PURE__*/_jsx(Timer, {\n        start_time: test.created_at,\n        duration: test === null || test === void 0 ? void 0 : (_test$quiz = test.quiz) === null || _test$quiz === void 0 ? void 0 : _test$quiz.duration\n      }), test && !isLoading && (test === null || test === void 0 ? void 0 : test.quiz.test_questions) && /*#__PURE__*/_jsx(AnswersContext.Provider, {\n        value: {\n          answers: answers,\n          setAnswers: setAnswers\n        },\n        children: /*#__PURE__*/_jsx(QuizIDContext.Provider, {\n          value: {\n            quizID: id\n          },\n          children: /*#__PURE__*/_jsx(Questions, {\n            questions: test.quiz.test_questions\n          })\n        })\n      }), /*#__PURE__*/_jsx(Submit, {\n        answers: answers,\n        test_id: test.id\n      })]\n    })]\n  });\n};\n\nexport default QuizTest;\nvar Container = withStyles({\n  root: {\n    width: \"100vw\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    backgroundColor: \"#5D00A5\",\n    minHeight: \"100vh\",\n    color: \"white\"\n  }\n})(Box);","map":null,"metadata":{},"sourceType":"module"}