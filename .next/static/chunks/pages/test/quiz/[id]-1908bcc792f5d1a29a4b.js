(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[673],{718:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSP:function(){return kn},default:function(){return _n}});var i=t(5893),o=t(4699),r=t(2318),s=t(7577),a=t(5477),u=t(4670),l=t(7748),d=t(7294),c=t(3637),v=t(6814),h=t(3901),f=t(591),p=t(3518),g=t(3258),x=t(1120);function m(n,e,t){var i;if(!t)return!1;if(!t[null===e||void 0===e?void 0:e.id])return!1;if(!Array.isArray(t[null===e||void 0===e?void 0:e.id]))return!1;var o=!1;return null===(i=t[null===e||void 0===e?void 0:e.id])||void 0===i||i.forEach((function(e){(null===e||void 0===e?void 0:e.optionId)==n&&(o=!0)})),o}function Z(n){var e,t,o=n.option,r=(0,d.useContext)(gn),s=r.answers,a=r.setAnswers,u=(0,d.useContext)(T).question,l=function(n,e,t,i){var o=(0,d.useState)(m(n,e,t)),r=o[0],s=o[1];return(0,d.useEffect)((function(){s(m(n,e,t))}),[t]),{isChecked:r,handleClick:function(){i(n,e)}}}(null===o||void 0===o?void 0:o.id,u,s,a),c=l.isChecked,v=l.handleClick,x=null!=(null===o||void 0===o?void 0:o.image),Z=w({shouldCenter:x});return(0,i.jsxs)("div",{className:Z.container,onClick:v,children:["multiple_choice"===(null===u||void 0===u?void 0:u.answer_type)&&(0,i.jsx)(p.Z,{checked:c}),"checkboxes"===(null===u||void 0===u?void 0:u.answer_type)&&(0,i.jsx)(g.Z,{checked:c}),(0,i.jsxs)("div",{className:Z.titleAndImageContainer,children:[(null===o||void 0===o?void 0:o.title)&&(0,i.jsx)(j,{children:null===o||void 0===o?void 0:o.title}),(null===o||void 0===o||null===(e=o.image)||void 0===e?void 0:e.image_link)&&(0,i.jsx)(h.Z,{src:"".concat(f.LL,"/storage/").concat(null===o||void 0===o||null===(t=o.image)||void 0===t?void 0:t.image_link),variant:"square",style:{height:200,width:200,margin:"0.2rem 0"}})]})]})}var w=(0,x.Z)({container:{borderTop:"1px solid gray",padding:"0.1rem 0rem",display:"flex",alignItems:"center",cursor:"pointer"},titleAndImageContainer:{width:"100%",display:"flex",flexDirection:"column",alignItems:function(n){return n.shouldCenter?"center":""}}}),j=(0,u.Z)({root:{}})(r.Z),b=t(6334);function y(n){(0,v.Z)(n);var e=(0,d.useContext)(gn),t=e.answers,o=e.setAnswers,r=(0,d.useContext)(T).question,s=function(n,e,t){var i=(0,d.useState)(function(){var t;return e&&e["".concat(null===n||void 0===n?void 0:n.id)]&&e["".concat(null===n||void 0===n?void 0:n.id)][0]?null===(t=e["".concat(null===n||void 0===n?void 0:n.id)][0])||void 0===t?void 0:t.text:""}()),o=i[0],r=i[1];return{text:o,handleChange:function(e){var i,o,s;r(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value),t(null===n||void 0===n||null===(o=n.options[0])||void 0===o?void 0:o.id,n,null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value)}}}(r,t,o),a=s.text,u=s.handleChange;return(0,i.jsx)(C,{children:(0,i.jsx)(b.Z,{id:"".concat(null===r||void 0===r?void 0:r.id,"-value"),label:"Answer",variant:"outlined",value:a,onChange:u,fullWidth:!0})})}var C=(0,u.Z)({root:{width:"100%",paddingTop:"1rem"}})(l.Z);function k(n){(0,v.Z)(n);var e=(0,d.useContext)(T).question;return(0,i.jsxs)(_,{children:[(null===e||void 0===e?void 0:e.options)&&"short_paragraph"!=(null===e||void 0===e?void 0:e.answer_type)&&(null===e||void 0===e?void 0:e.options.map((function(n){return(0,i.jsx)(Z,{option:n},null===n||void 0===n?void 0:n.id)}))),"short_paragraph"==(null===e||void 0===e?void 0:e.answer_type)&&(0,i.jsx)(y,{})]})}var _=(0,u.Z)({root:{width:"100%",display:"flex",flexDirection:"column",backgroundColor:"#eef3f7",marginTop:"0.5rem",padding:"0 0.5rem"}})(l.Z);function S(n){var e,t;(0,v.Z)(n);var o=(0,d.useContext)(T).question;return(0,i.jsx)(I,{children:(0,i.jsxs)(P,{children:[(null===o||void 0===o?void 0:o.question)&&(0,i.jsxs)(q,{children:["checkboxes"==(null===o||void 0===o?void 0:o.answer_type)&&(0,i.jsx)(A,{variant:"caption",children:"*Multiple Answers Might Be Correct."}),(0,i.jsx)(A,{variant:"subtitle1",children:"Q. ".concat(null===o||void 0===o?void 0:o.question)})]}),(null===o||void 0===o||null===(e=o.image)||void 0===e?void 0:e.image_link)&&(0,i.jsx)(h.Z,{src:"".concat(f.LL,"/storage/").concat(null===o||void 0===o||null===(t=o.image)||void 0===t?void 0:t.image_link),variant:"square",style:{height:200,width:200,margin:"0.2rem 0"}}),(null===o||void 0===o?void 0:o.options)&&(0,i.jsx)(k,{})]})})}var I=(0,u.Z)({root:{width:"100%",height:"50vh",overflowY:"scroll",overflowX:"hidden"}})(l.Z),A=(0,u.Z)({root:{fontWeight:600,padding:"0 0.5rem"}})(r.Z),q=(0,u.Z)({root:{display:"flex",flexDirection:"column"}})(l.Z),P=(0,u.Z)({root:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}})(l.Z);var T=(0,d.createContext)(null);function N(n){var e=n.question,t=function(n,e){var t=(0,d.useState)(n==e),i=t[0],o=t[1],r=(0,d.useState)("right"),s=r[0],a=r[1];return(0,d.useEffect)((function(){e>n?a("right"):e<n&&a("left"),o(n==e)}),[e]),{isVisible:i,direction:s}}(n.index,(0,d.useContext)(gn).currentQuestionIndex),o=t.isVisible;t.direction;return(0,i.jsx)(c.Z,{in:o,timeout:250,children:o?(0,i.jsx)(O,{children:(0,i.jsx)(T.Provider,{value:{question:e},children:(0,i.jsx)(S,{})})}):(0,i.jsx)("div",{})})}var O=(0,u.Z)({root:{display:"flex",flexDirection:"column",padding:"0.5rem 1rem",transition:"1s"}})(l.Z);function E(){var n=(0,d.useContext)(gn),e=n.questionCount,t=n.currentQuestionIndex,o=n.timeRemaining,r=n.secondsRemaining,s=R({secondsRemaining:r});return(0,i.jsxs)(z,{children:[(0,i.jsx)(D,{variant:"subtitle2",children:"Q.".concat(t+1,"/").concat(e)}),(0,i.jsx)(Q,{variant:"subtitle2",className:s.timeRemaining,children:o})]})}var z=(0,u.Z)({root:{float:"left",display:"flex",alignItems:"center"}})(l.Z),D=(0,u.Z)({root:{marginRight:"1rem",fontWeight:600}})(r.Z),Q=(0,u.Z)({root:{fontWeight:600}})(r.Z),R=(0,x.Z)({timeRemaining:{color:function(n){return n.secondsRemaining>60?"black":"red"}}});function L(n){(0,v.Z)(n);var e=(0,d.useContext)(gn),t=e.goToNextQuestion,o=e.goToPreviousQuestion,r=e.showNext,s=e.showPrevious;return(0,i.jsxs)(W,{children:[r&&(0,i.jsx)(B,{onClick:t,children:(0,i.jsx)(M,{variant:"caption",color:"inherit",children:"Next"})}),s&&(0,i.jsx)(B,{onClick:o,children:(0,i.jsx)(M,{variant:"caption",color:"inherit",children:"Prev"})}),(0,i.jsx)(E,{})]})}var W=(0,u.Z)({root:{backgroundColor:"#f0f2f5",padding:"0.5rem"}})(l.Z),B=(0,u.Z)({root:{float:"right",color:"white",backgroundColor:"#0e62cb",padding:"0.2rem",margin:"auto 0.2rem",borderRadius:5,cursor:"pointer","&:hover":{backgroundColor:"#09448e"}}})(l.Z),M=(0,u.Z)({root:{fontWeight:600,textTransform:"capitalize"}})(r.Z),X=t(7757),Y=t.n(X),F=t(2137),V=t(7329),H=t(6156),G=t(3316),J=t(9669),K=t.n(J);function U(n,e,t){return $.apply(this,arguments)}function $(){return($=(0,F.Z)(Y().mark((function n(e,t,i){var o;return Y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,K().post("".concat(f.a9,"/api/quiz-test/answers/store"),{test_id:e,options:t},{headers:{Accept:"Application/json",Authorization:"Bearer ".concat(i)}}).then((function(n){return n.data})).catch((function(){return{error:"network error"}}));case 4:return o=n.sent,n.abrupt("return",o);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function nn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function en(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?nn(Object(t),!0).forEach((function(e){(0,H.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function tn(n,e,t,i){var r=(0,G.Z)("user",""),s=(0,o.Z)(r,1)[0],a=(0,G.Z)("".concat(null===s||void 0===s?void 0:s.email,"-test").concat(null===t||void 0===t?void 0:t.id,"-answers"),{}),u=(0,o.Z)(a,2),l=u[0],c=u[1],v=(0,d.useState)(0),h=v[0],f=v[1],p=(0,d.useState)(T()),g=p[0],x=p[1],m=(0,d.useState)((function(){return t?on(null===t||void 0===t?void 0:t.created_at,i.toString()):600})),Z=m[0],w=m[1],j=(0,d.useState)(""),b=j[0],y=j[1],C=(0,d.useState)(!1),k=C[0],_=C[1],S=(0,d.useState)(!1),I=S[0],A=S[1];(0,d.useEffect)((function(){setInterval((function(){w(on(null===t||void 0===t?void 0:t.created_at,i))}),500)}),[]),(0,d.useEffect)((function(){Z<=0?(N(),y("Test Finished")):y(function(n){var e=Math.floor(n/60),t=Math.floor(n%60);return"".concat(e<10?"0".concat(e):e,":").concat(t<10?"0".concat(t):t)}(Z))}),[Z]),(0,d.useEffect)((function(){x(T()),h==(null===e||void 0===e?void 0:e.length)-1?_(!0):_(!1)}),[h]);var q=0!=h,P=h<(null===e||void 0===e?void 0:e.length)-1;function T(){return 0==(null===e||void 0===e?void 0:e.length)?100:100*(h+1)/(null===e||void 0===e?void 0:e.length)}function N(){return O.apply(this,arguments)}function O(){return(O=(0,F.Z)(Y().mark((function n(){var e,i,o;return Y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l||alert("Not enough answers to submit!"),A(!0),i=[],null===(e=Object.values(l))||void 0===e||e.forEach((function(n){n&&Array.isArray(n)&&(null===n||void 0===n||n.forEach((function(n){null!==n&&void 0!==n&&n.optionId&&i.push({optionId:null===n||void 0===n?void 0:n.optionId,text:null!==n&&void 0!==n&&n.text?null===n||void 0===n?void 0:n.text:""})})))})),n.next=6,U(null===t||void 0===t?void 0:t.id,i,null===s||void 0===s?void 0:s.token);case 6:if(!(o=n.sent).error&&"error"!=o){n.next=10;break}return alert("Something went wrong. Please refresh and submit the test."),n.abrupt("return");case 10:c({}),window.location.href="/test/".concat(null===t||void 0===t?void 0:t.id,"/result"),A(!1);case 13:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return{answers:l,setAnswers:function(n,e,t){c((function(i){var o=en({},i);if("multiple_choice"===e.answer_type){var r,s=o["".concat(null===e||void 0===e?void 0:e.id)];if((!s||Array.isArray(s)&&!s[0])&&(o=en(en({},i),{},(0,H.Z)({},"".concat(null===e||void 0===e?void 0:e.id),[{optionId:n}]))),s&&Array.isArray(s)&&s[0])o=(null===(r=s[0])||void 0===r?void 0:r.optionId)==n?en(en({},i),{},(0,H.Z)({},"".concat(null===e||void 0===e?void 0:e.id),[])):en(en({},i),{},(0,H.Z)({},"".concat(null===e||void 0===e?void 0:e.id),[{optionId:n}]))}else if("checkboxes"===(null===e||void 0===e?void 0:e.answer_type)){var a=o["".concat(null===e||void 0===e?void 0:e.id)];if((!a||Array.isArray(a)&&!a[0])&&(o=en(en({},i),{},(0,H.Z)({},"".concat(null===e||void 0===e?void 0:e.id),[{optionId:n}]))),a&&Array.isArray(a)){var u=!1;null===a||void 0===a||a.forEach((function(e){(null===e||void 0===e?void 0:e.optionId)==n&&(u=!0)})),o=en(en({},i),{},u?(0,H.Z)({},"".concat(null===e||void 0===e?void 0:e.id),null===a||void 0===a?void 0:a.filter((function(e){return(null===e||void 0===e?void 0:e.optionId)!=n}))):(0,H.Z)({},"".concat(null===e||void 0===e?void 0:e.id),[].concat((0,V.Z)(a),[{optionId:n}])))}}else if("short_paragraph"===(null===e||void 0===e?void 0:e.answer_type)){if(!t)return en({},o);o=en(en({},i),{},(0,H.Z)({},"".concat(null===e||void 0===e?void 0:e.id),[{optionId:n,text:t}]))}return en({},o)}))},progress:g,currentQuestionIndex:h,goToNextQuestion:function(){h>=(null===e||void 0===e?void 0:e.length)-1||f(h+1)},goToPreviousQuestion:function(){h<=0||f(h-1)},showPrevious:q,showNext:P,timeRemaining:b,secondsRemaining:Z,showSubmitButton:k,isSubmitting:I,handleSubmit:N}}function on(n,e){var t=function(n){var e=n.split(":"),t=(0,o.Z)(e,3),i=t[0],r=t[1],s=t[2],a=0;return a+=60*parseInt(i)*60,a+=60*parseInt(r),a+=parseInt(s)}(e),i=new Date("".concat(n)),r=new Date,s=new Date("".concat(n));s.setTime(i.getTime()+1e3*t);var a=(s.getTime()-r.getTime())/1e3;return Math.floor(a)}function rn(n){var e=n.progress,t=sn({progress:e});return(0,i.jsx)("div",{className:null===t||void 0===t?void 0:t.container,children:(0,i.jsx)("div",{className:null===t||void 0===t?void 0:t.progress})})}var sn=(0,x.Z)({container:{width:"100%",backgroundColor:"#d7d7dc",margin:0},progress:{width:function(n){var e=n.progress;return"".concat(e,"%")},padding:"0.5rem 0",transition:"width 0.5s ease-in-out",background:"transparent linear-gradient(180deg, #003EAA 0%, #002461E0 100%) 0% 0% no-repeat padding-box"}}),an=t(282);var un=t(4170);function ln(n){var e=n.onClose,t=n.open,o=(0,d.useContext)(gn),r=o.isSubmitting,s=o.handleSubmit;return(0,i.jsx)(un.Z,{onClose:e,"aria-labelledby":"simple-dialog-title",open:t,children:(0,i.jsxs)(dn,{children:[(0,i.jsx)(cn,{children:"Are you sure you want to submit the test?"}),(0,i.jsxs)(vn,{children:[(0,i.jsx)(hn,{onClick:s,children:r?"Submitting...":"Yes"}),(0,i.jsx)(an.Z,{onClick:e,children:"No"})]})]})})}var dn=(0,u.Z)({root:{padding:"2rem"}})(l.Z),cn=(0,u.Z)({root:{fontWeight:600,fontSize:"1.3rem",margin:"1rem auto"}})(l.Z),vn=(0,u.Z)({root:{display:"flex",alignItems:"center",justifyContent:"space-around"}})(l.Z),hn=(0,u.Z)({root:{backgroundColor:"red",color:"white","&:hover":{color:"red"}}})(an.Z);function fn(){var n=function(){var n=(0,d.useState)(!1),e=n[0],t=n[1];return{open:e,handleOpen:function(){t(!0)},handleClose:function(){t(!1)}}}(),e=n.open,t=n.handleOpen,o=n.handleClose;return(0,i.jsxs)("div",{children:[(0,i.jsx)("br",{}),(0,i.jsx)(pn,{variant:"outlined",fullWidth:!0,onClick:t,children:"Submit"}),(0,i.jsx)(ln,{open:e,onClose:o})]})}var pn=(0,u.Z)({root:{color:"#0f3a86",border:"1px solid #0f3a86",marginBottom:"2rem",marginTop:"0.5rem"}})(an.Z),gn=(0,d.createContext)(null);function xn(n){var e=n.quizTitle,t=n.questions,o=n.isAssessment,s=(n.quizId,tn(0,t,n.test,n.duration)),a=s.answers,u=s.setAnswers,l=s.currentQuestionIndex,d=s.goToNextQuestion,c=s.goToPreviousQuestion,v=s.progress,h=s.showPrevious,f=s.showNext,p=s.timeRemaining,g=s.secondsRemaining,x=s.showSubmitButton,m=s.isSubmitting,Z=s.handleSubmit;return(0,i.jsx)(gn.Provider,{value:{answers:a,setAnswers:u,currentQuestionIndex:l,goToNextQuestion:d,goToPreviousQuestion:c,showPrevious:h,showNext:f,questionCount:null===t||void 0===t?void 0:t.length,timeRemaining:p,secondsRemaining:g,isSubmitting:m,handleSubmit:Z},children:(0,i.jsxs)(Zn,{children:[(0,i.jsxs)(mn,{children:[(0,i.jsx)(wn,{children:(0,i.jsx)(r.Z,{variant:"h6",color:"inherit",children:"".concat(e," ").concat(o?"assessment":"quiz")})}),t&&(null===t||void 0===t?void 0:t.map((function(n,e){return(0,i.jsx)(N,{index:e,question:n},null===n||void 0===n?void 0:n.id)}))),(0,i.jsx)(rn,{progress:v}),(0,i.jsx)(L,{})]}),x&&(0,i.jsx)(fn,{})]})})}var mn=(0,u.Z)({root:{backgroundColor:"inherit",width:"100%",borderRadius:5,overflow:"hidden",boxShadow:"0px 0px 8px 0px #2b579a",display:"flex",flexDirection:"column"}})(l.Z),Zn=(0,u.Z)({root:{width:"min(97%, 700px)",display:"flex",flexDirection:"column"}})(l.Z),wn=(0,u.Z)({root:{width:"100%",textAlign:"center",color:"white",padding:"0.5rem 0",background:"transparent linear-gradient(180deg, #003EAA 0%, #002461E0 100%) 0% 0% no-repeat padding-box",textTransform:"capitalize"}})(l.Z);function jn(n,e){return bn.apply(this,arguments)}function bn(){return(bn=(0,F.Z)(Y().mark((function n(e,t){var i;return Y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,K().post("".concat(f.LL,"/api/quiz-test/start"),{quiz_id:e},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(n){return n.data}));case 4:return i=n.sent,n.abrupt("return",i);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function yn(n){var e=function(n){var e=(0,G.Z)("user",""),t=(0,o.Z)(e,1)[0],i=(0,d.useState)(!1),r=i[0],s=i[1],a=(0,d.useState)(""),u=a[0],l=a[1],c=(0,d.useState)(),v=c[0],h=c[1],f=(0,d.useState)(),p=f[0],g=f[1];(0,d.useEffect)((function(){t&&null!==t&&void 0!==t&&t.token&&x()}),[]);var x=function(){var e=(0,F.Z)(Y().mark((function e(){var i;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,jn(n,null===t||void 0===t?void 0:t.token);case 3:i=e.sent,l(null===i||void 0===i?void 0:i.status),h(null===i||void 0===i?void 0:i.quiz),g(null===i||void 0===i?void 0:i.test),s(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{isLoading:r,testStatus:u,quiz:v,test:p}}(n.quizId),t=e.quiz,s=e.test,u=e.testStatus,l=e.isLoading;return(0,i.jsxs)(Cn,{children:[l&&(0,i.jsx)(a.Z,{}),"highest_attempt_count_reached"===u&&(0,i.jsx)(r.Z,{variant:"h6",color:"error",children:"You have reached the highest attempt count."}),!l&&"highest_attempt_count_reached"!==u&&t&&(0,i.jsx)(xn,{questions:null===t||void 0===t?void 0:t.questions,quizTitle:null===t||void 0===t?void 0:t.title,isAssessment:null!==(null===t||void 0===t?void 0:t.assessment)&&t.assessment,quizId:null===t||void 0===t?void 0:t.id,duration:null===t||void 0===t?void 0:t.duration,test:s})]})}var Cn=(0,u.Z)({root:{display:"flex",width:"100vw",minHeight:"calc(100vh - 100px)",flexDirection:"column",alignItems:"center",padding:"5rem 0rem 0rem 0rem",backgroundColor:"#f0f2f5"}})(l.Z),kn=!0,_n=function(n){var e=n.quizId,t=(0,G.Z)("user",""),a=(0,o.Z)(t,1)[0];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Z,{}),a?(0,i.jsx)(yn,{quizId:e}):(0,i.jsx)(r.Z,{variant:"h6",color:"error",children:"Please Login To Continue"})]})}},591:function(n,e,t){"use strict";t.d(e,{LL:function(){return i},a9:function(){return o}});var i="https://admin.smartifier.org",o="https://admin.smartifier.org";e.ZP="https://smartifier.org"},6548:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/test/quiz/[id]",function(){return t(718)}])}},function(n){n.O(0,[774,351,670,510,52,531,577],(function(){return e=6548,n(n.s=e);var e}));var e=n.O();_N_E=e}]);